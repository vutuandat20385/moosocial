(function(a,f){"function"===typeof define&&define.amd?define(["jquery","mooUser"],f):"object"===typeof exports?module.exports=f(require("jquery")):a.mooLike=f()})(this,function(a,f){var k=function(b,c,d,e){b.hasClass("do_ajax")||(b.addClass("do_ajax"),a.post(mooConfig.url.base+"/likes/ajax_add/"+c+"/"+d+"/"+e,{noCache:1},function(d){try{var c=a.parseJSON(d);a("#like_count").html(parseInt(c.like_count));a("#dislike_count").html(parseInt(c.dislike_count));a("#like_count2").html(parseInt(c.like_count));
a("#dislike_count2").html(parseInt(c.dislike_count));e?(a("#like_count").parent().prev().toggleClass("active"),a("#dislike_count").parent().prev().removeClass("active")):(a("#dislike_count").parent().prev().toggleClass("active"),a("#like_count").parent().prev().removeClass("active"))}catch(h){f.validateUser()}b.removeClass("do_ajax")}))},g=function(b,c,d){b.hasClass("do_ajax")||(b.addClass("do_ajax"),a.post(mooConfig.url.base+"/likes/ajax_add/Photo_Photo/"+c+"/"+d,{noCache:1},function(c){try{var e=
a.parseJSON(c);a("#photo_like_count2").html(parseInt(e.like_count));a("#photo_dislike_count2").html(parseInt(e.dislike_count));d?(a("#photo_like_count").toggleClass("active"),a("#photo_dislike_count").removeClass("active")):(a("#photo_dislike_count").toggleClass("active"),a("#photo_like_count").removeClass("active"))}catch(m){f.validateUser()}b.removeClass("do_ajax")}))},l=function(b,c,d,e){if(!b.hasClass("do_ajax")){var g="photo_comment"==c?"comment":c;b.addClass("do_ajax");a.post(mooConfig.url.base+
"/likes/ajax_add/"+g+"/"+d+"/"+e,{noCache:1},function(g){try{var h=a.parseJSON(g);a("#"+c+"_like_"+d).html(parseInt(h.like_count));a("#"+c+"_dislike_"+d).html(parseInt(h.dislike_count));"comment"==c&&(a("#photo_comment_like_"+d).html(parseInt(h.like_count)),a("#photo_comment_dislike_"+d).html(parseInt(h.dislike_count)));e?(a("#"+c+"_l_"+d).toggleClass("active"),a("#"+c+"_d_"+d).removeClass("active"),"comment"==c&&(a("#photo_comment_l_"+d).toggleClass("active"),a("#photo_comment_d_"+d).removeClass("active"))):
(a("#"+c+"_d_"+d).toggleClass("active"),a("#"+c+"_l_"+d).removeClass("active"),"comment"==c&&(a("#photo_comment_d_"+d).toggleClass("active"),a("#photo_comment_l_"+d).removeClass("active")))}catch(n){f.validateUser()}b.removeClass("do_ajax")})}};return{initLikeActivity:function(){a(".likeActivity").unbind("click");a(".likeActivity").click(function(){var b=a(this).data();l(a(this),b.type,b.id,b.status)})},likePhoto:g,initLikeItem:function(){a(".likeItem").unbind("click");a(".likeItem").click(function(){var b=
a(this).data();k(a(this),b.type,b.id,b.status)})},initLikePhoto:function(){a(".likePhoto").unbind("click");a(".likePhoto").on("click",function(){var b=a(this).data();g(a(this),b.id,b.thumbUp)})}}});