(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","mooMention","textcomplete"],b)}else{if(typeof exports==="object"){module.exports=b(require("jquery"))}else{a.mooEmoji=b(a.jQuery)}}}(this,function(f,b){var h={a48:":evil:",a20:":sad:",a1:":laugh:",a41:":cool:",a50:":surprised:",a24:":crying:",a29:":sweating:",a52:":speechless:",a8:":kiss:",a39:":cheeky:",a6:":wink:",a4:":blushing:",a47:":wondering:",a42:":sleepy:",a7:":inlove:",a3:":smile:",a43:":yawn:",a37:":puke:",a35:":angry:",a15:":wasntme:",a33:":worry:",a8:":love:",a74:":devil:",a72:":angel:",a19:":envy:",a53:":meh:",a23:":rofl:",a18:":happy:",a57:":smirk:",a77:":beer:",a76:":clap:",a2:":sun:",a5:":flex:",a9:":no:",a10:":yes:",a11:":ok:",a12:":punch:",a13:":star:",a14:":car:",a16:":poop:",a17:":umbrella:",a21:":cake:",a22:":drink:",a25:":football:",a26:":mad:",a27:":silly:",a28:":flu:",a30:":excited:",a31:":pained:",a32:":cup:",a34:":music:",a36:":candy:",a38:":chicken:",a40:":cow:",a44:":dog:",a45:":hih:",a46:":email:",a49:":bike:",a50:":time:",a51:":brokenheart:",a54:":slow:",a55:":eat:",a56:":corn:"};var g;var c;var j=function(m,k){if(mooConfig.isMobile){return}if(typeof(mooViewer)=="undefined"){return}var l=f("#"+m+"-emoji");if(l.length>0&&!l.find(".emoji-toggle-face").length){d(l,m)}};var d=function(k,n){k.append('<i class="emoji-toggle-face material-icons">mood</i><div class="emoji-toggle-popup"><div class="emoji-toggle-overlay"></div><div class="emoji-toggle-main"><ul class="emoji-toggle-list"></ul></div></div>');k.find(".emoji-toggle-face").click(function(){f(this).parent().find(".emoji-toggle-popup").toggleClass("show")});k.find(".emoji-toggle-overlay").click(function(){f(this).parent().removeClass("show")});var l=0;for(key in h){var m=f('<li class="" data-index="'+l+'"><span id="'+key+'" class="iconos"></span></li>');m.find("span").click(function(o){o.preventDefault();var p=f(this).attr("id");a(n,h[p]);k.find(".emoji-toggle-overlay").trigger("click")});m.appendTo(k.find(".emoji-toggle-list"));l++}};var i=function(t,r,m,n){var s=0;var q=m.siblings(".messageHidden");var o=(q.length>0)?q.val():m.val();s=o.length-c.length;var p=r;var l=o.substring(0,s);var k=o.substring(s);k=k.replace(o.substring(s,(s+n)),p);q.val(l+k);b.reConfigOverlay(m)};var e=function(m,k){var l=m.getInstanceOverlay(m);m.revokeOverlay([{match:h}],l);if(typeof k!==undefined){m.reRenderTextOnOverlay(l)}};var a=function(p,n){if(f("#"+p).siblings(".messageHidden").length){g=0;c="";var o=f("#"+p).prop("selectionStart")-(n.length)+1;i(0,n,f("#"+p),g+1);b.reConfigOverlay(f("#"+p),true);f("#"+p).focus()}else{var q=f("#"+p).prop("selectionStart");var l=f("#"+p).val();var m=l.substring(0,q);var k=l.substring(q,l.length);f("#"+p).val(m+n+k);element=document.getElementById(p);element.focus();element.setSelectionRange(q+n.length,q+n.length)}f("#"+p).trigger("updateAutoGrow")};return{init:j}}));