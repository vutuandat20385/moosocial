(function(a,d){"function"===typeof define&&define.amd?define(["jquery","mooFileUploader","mooGlobal","mooMention"],d):"object"===typeof exports?module.exports=d(require("jquery")):a.mooAttach=d()})(this,function(a,d,h,k){return{registerAttachComment:function(c,b){b="undefined"==typeof b?"":"#"+b+" ";new d.fineUploader({element:a(b+"#comment_button_attach_"+c)[0],text:{uploadButton:'<div class="upload-section"><i class="material-icons">photo_camera</i></div>'},validation:{allowedExtensions:mooConfig.photoExt,
    sizeLimit:mooConfig.sizeLimit},multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},callbacks:{onError:h.errorHandler,onSubmit:function(g,d){var e=a('<span id="attach_'+c+"_"+g+'" style="background-image:url('+mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');a(b+"#comment_preview_image_"+c).append(e);a(b+"#comment_button_attach_"+c).hide()},onComplete:function(g,d,e,h){a(this.getItemByFileId(g)).remove();img=a('<img src="'+mooConfig.url.base+
    "/"+e.photo+'">');img.load(function(){var f=a("#attach_"+c+"_"+g);f.attr("style","background-image:url("+mooConfig.url.base+"/"+e.photo+")");var d=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');f.append(d);f.find(".thumb-review-delete").unbind("click");f.find(".thumb-review-delete").click(function(){f.remove();a(b+"#comment_button_attach_"+c).show();a(b+"#comment_image_"+c).val("")})});a(b+"#comment_image_"+c).val(e.photo)}}})},registerAttachCommentEdit:function(c,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       b){new d.fineUploader({element:a("#"+c+"_comment_attach_"+b)[0],text:{uploadButton:'<div class="upload-section"><i class="material-icons">photo_camera</i></div>'},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},callbacks:{onError:h.errorHandler,onSubmit:function(g,d){var e=a('<span id="attach__'+b+"_"+g+'" style="background-image:url('+mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');
    a("#"+c+"_comment_preview_attach_"+b).append(e);a("#"+c+"_comment_attach_"+b).hide()},onComplete:function(g,d,e,h){a(this.getItemByFileId(g)).remove();img=a('<img src="'+mooConfig.url.base+"/"+e.photo+'">');img.load(function(){var f=a("#attach__"+b+"_"+g);f.attr("style","background-image:url("+mooConfig.url.base+"/"+e.photo+")");var d=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');f.append(d);f.find(".thumb-review-delete").unbind("click");f.find(".thumb-review-delete").click(function(){f.remove();
    a("#"+c+"_comment_attach_"+b).show();a("#"+c+"_comment_attach_id_"+b).val("")})});a("#"+c+"_comment_attach_id_"+b).val(e.photo);a("#"+c+"_comment_attach_"+b).hide()}}})},registerAttachCommentReplay:function(c,b){k.init("commentReplyForm"+c);b="undefined"==typeof b?"":"#"+b+" ";new d.fineUploader({element:a(b+"#comment_reply_button_attach_"+c)[0],text:{uploadButton:'<div class="upload-section"><i class="material-icons">photo_camera</i></div>'},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},
    multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},callbacks:{onError:h.errorHandler,onSubmit:function(g,d){var e=a('<span id="attach_'+c+"_"+g+'" style="background-image:url('+mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');a(b+"#comment_reply_preview_image_"+c).append(e);a(b+"#comment_reply_button_attach_"+c).hide()},onComplete:function(g,d,e,h){a(this.getItemByFileId(g)).remove();img=a('<img src="'+mooConfig.url.base+"/"+e.photo+
        '">');img.load(function(){var f=a("#attach_"+c+"_"+g);f.attr("style","background-image:url("+mooConfig.url.base+"/"+e.photo+")");var d=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');f.append(d);f.find(".thumb-review-delete").unbind("click");f.find(".thumb-review-delete").click(function(){f.remove();a(b+"#comment_reply_button_attach_"+c).show();a(b+"#comment_reply_image_"+c).val("")})});a(b+"#comment_reply_image_"+c).val(e.photo)}}})},registerAttachActivityCommentReplay:function(c,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           b){k.init("activitycommentReplyForm"+c);b="undefined"==typeof b?"":"#"+b+" ";new d.fineUploader({element:a(b+"#activitycomment_reply_button_attach_"+c)[0],text:{uploadButton:'<div class="upload-section"><i class="material-icons">photo_camera</i></div>'},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},callbacks:{onError:h.errorHandler,onSubmit:function(g,d){var e=a('<span id="attach_'+c+"_"+g+'" style="background-image:url('+
    mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');a(b+"#activitycomment_reply_preview_image_"+c).append(e);a(b+"#activitycomment_reply_button_attach_"+c).hide()},onComplete:function(g,d,e,h){a(this.getItemByFileId(g)).remove();img=a('<img src="'+mooConfig.url.base+"/"+e.photo+'">');img.load(function(){var f=a("#attach_"+c+"_"+g);f.attr("style","background-image:url("+mooConfig.url.base+"/"+e.photo+")");var d=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');
    f.append(d);f.find(".thumb-review-delete").unbind("click");f.find(".thumb-review-delete").click(function(){f.remove();a(b+"#activitycomment_reply_button_attach_"+c).show();a(b+"#activitycomment_reply_image_"+c).val("")})});a(b+"#activitycomment_reply_image_"+c).val(e.photo)}}})},registerAttachCommentItemReplay:function(c,b){k.init("item_commentReplyForm"+c);b="undefined"==typeof b?"":"#"+b+" ";new d.fineUploader({element:a(b+"#item_comment_reply_button_attach_"+c)[0],text:{uploadButton:'<div class="upload-section"><i class="material-icons">photo_camera</i></div>'},
    validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},callbacks:{onError:h.errorHandler,onSubmit:function(d,h){var e=a('<span id="attach_'+c+"_"+d+'" style="background-image:url('+mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');a(b+"#item_comment_reply_preview_image_"+c).append(e);a(b+"#item_comment_reply_button_attach_"+c).hide()},onComplete:function(d,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        h,e,k){a(this.getItemByFileId(d)).remove();img=a('<img src="'+mooConfig.url.base+"/"+e.photo+'">');img.load(function(){var f=a("#attach_"+c+"_"+d);f.attr("style","background-image:url("+mooConfig.url.base+"/"+e.photo+")");var g=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');f.append(g);f.find(".thumb-review-delete").unbind("click");f.find(".thumb-review-delete").click(function(){f.remove();a(b+"#item_comment_reply_button_attach_"+c).show();a(b+"#item_comment_reply_image_"+
        c).val("")})});a(b+"#item_comment_reply_image_"+c).val(e.photo)}}})}}});